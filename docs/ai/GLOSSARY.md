# Глоссарий

- **Расширение графа (graph expansion) / edge‑rooms**: каждое исходное ребро `(u,v)` заменяем вершиной `c(u,v)` (коннектор) и рёбрами `(u,c)` и `(c,v)`.
- **RoomMeta**: компонент префаба, который представляет “обычную комнату” (room node).
- **ConnectorMeta**: компонент префаба “edge‑room” (коридор‑комната / corridor room), вставляется на каждое исходное ребро.
- **DoorSocket**: дискретная точка соединения: `DoorSide` (`North/East/South/West`) + локальная клетка (cell offset).
- **DoorSocketSpan**: авторинг‑хелпер, генерирует несколько `DoorSocket` вдоль стены (дискретный “радиус”).
- **Door cell / клетка двери** (раньше часто называли “bite cell”): world‑клетка прохода между комнатой и коннектором. При bite‑depth это `base + inward*X` для выбранной глубины `X`.
- **Глубина укуса (bite depth)**: параметр `DoorSocket.BiteDepth` на сокете коннектора; позволяет стыковать сокет комнаты не только в базовую клетку, но и на глубине `X` по лучу `inward` (0..BiteDepth-1).
- **База сокета (base cell)**: world‑клетка сокета коннектора на глубине 0 (авторская позиция сокета).
- **Inward (inward vector / inward ray)**: направление “внутрь” коннектора от стороны сокета (например, для `North` это `down`). Используется для вычисления глубины `X`.
- **Tangent (tangent vector / tangent neighbors)**: перпендикуляр к inward; точки `base ± tangent` — это “боковые” клетки рядом с центральной дорожкой.
- **Маска выреза (carve‑mask)**: набор разрешённых overlap‑клеток на стыке `Room↔Connector`, который делает проход возможным несмотря на “стены у входа”. В актуальной версии это 3 дорожки (см. Carve rays) на глубину `X`; формулировка “две боковые wall‑клетки” — это частный случай при `X=0`.
- **Carve rays (3 дорожки)**: обобщение carve‑mask для глубины `X`:
  - floor‑ray: `base + inward*k`, `k=0..X`
  - wall‑rays: `base + inward*k ± tangent`, `k=0..X`
- **ModuleShape**: дискретная геометрия префаба (floor cells, wall cells, sockets).
- **Configuration Space (CS)**: для пары префабов `(A,B)` множество смещений `delta`, которые удовлетворяют выравниванию сокетов и правилам overlap.
- **Chain**: упорядоченная подзадача из faces/оставшихся путей; используется для инкрементальной укладки.
- **SA (Simulated Annealing)**: оптимизационный цикл, который “шевелит” layout и вероятностно принимает ухудшения по температуре.
- **Energy**: целевая функция (penalty) из overlap + штрафа за несостыкованные рёбра.
- **Placement**: инстанцирование префабов в сцене, проверки, carve‑mask, коммит в occupancy.
- **Stamping**: запись финальных тайлов (floor/walls) в глобальные Tilemap.
