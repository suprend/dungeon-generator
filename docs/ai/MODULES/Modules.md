# Modules (компоненты префабов)

Код: `Assets/Scripts/Modules/`

## Зачем это нужно

Эти компоненты определяют “что означает префаб” для генератора:
- как найти сокеты,
- как отличить room от connector,
- какие авторинг‑хелперы есть, чтобы не проставлять много сокетов руками.

## Ключевые типы

- `ModuleMetaBase`
  - общий base для room/connector meta
  - хранит ссылки на сокеты и runtime‑состояние “used”
- `RoomMeta`
  - маркер: трактуется как “room node”
- `ConnectorMeta`
  - маркер: трактуется как “edge‑room / corridor node”
- `DoorSocket`
  - направление (`DoorSide`) + позиция клетки через transform
  - ширина сейчас считается `1` (даже если поле существует)
  - `BiteDepth` (важно для коннекторов): сколько клеток внутрь вдоль `inward` разрешено стыковать сокет комнаты (`0..BiteDepth-1`)
- `DoorSocketSpan`
  - авторинг‑хелпер: генерирует дочерние `DoorSocket` вдоль стены
  - уменьшает ручную работу по сокетам
  - `SpanId` используется как группирующий идентификатор для авторинга/диагностики; ограничение “только один сокет на span” в текущем коде не применяется автоматически

## Чеклист авторинга префабов

- На корне префаба стоит `RoomMeta` или `ConnectorMeta` (оба наследуют `ModuleMetaBase`).
- Внутри префаба есть дочерние Tilemap’ы, в названии которых есть:
  - `floor` (case-insensitive) → occupancy пола
  - `wall` (case-insensitive) → occupancy стен
- Сокеты стоят в центрах клеток grid и имеют корректный `DoorSide`.
